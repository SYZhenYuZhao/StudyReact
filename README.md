# StudyReact

## 解决多层级组件间传值的方法（个人理解）

### 单向数据流

> 提到多层级组件间传值，就不得不提到单向数据流，因为在React中是数据流向是单向的，只能从高的层级传到低的层级（这里父组件是高的层级），因为单向数据流的缘故，我们父组件给子组件传值可以通过props十分便利，但如果层级嵌套过多，使用props维护起来又十分麻烦。而且我们要涉及到的通信方式不止存在父子组件之间，还存在兄弟之间。 下面我们来看应对不同通信方式的解决办法

### 回调方法解决父子组件间通信

> 解决父子之间传值，简单的来说，回调解决的是子给父传值，因为父给子传值可以使用props(这里就不过多赘述了)。而子给父传值，是逆数据流向的（违反单向数据流），我们可以通过props让父组件传给子组件一个方法，然后这个方法在子组件中接收**子组件想要传给父组件的信息作为参数**，并触发。（在父组件中自己定义如何处理，子组件给传给你的信息）

### React组件的状态提升and回调方法解决兄弟组件间通信

> 在React组件中,我们可以改变的只有State而props只能在传入组件之前改变。
- 1、假设我们不进行状态提升，想让A组件和B组件之间进行通信。以A组件传输数据给B组件为例就是**B组件（方法）->父组件（方法）->A组件(传参并触发B组件的方法)->B组件状态改变**此时数据保存在A组件中，A组件通过调用B组件的方法来给B组件传信息（此时这种方式并没有任何问题）
- 2、假设我们现在想让A组件和B、C组件之前通信，同样以A组件传输数据给B、C组件为例就是**B组件（方法）->父组件（方法）->A组件(传参并触发B组件的方法)->B组件状态改变**&&**C组件（方法）->父组件（方法）->A组件(传参并触发C组件的方法)->C组件状态改变**这个时候我们需要B、C组件都要将自己的方法传递给A组件，如果通信的组件增多，这样的传输方式过于繁琐，造成了过多的代码冗余。为了解决这种问题，我们使用状态提升的方式，将数据提升到共同的父组件中，通过A组件给父组件传值，然后父组件通过给子组件传递Props对子组件进行重新渲染。

### 发布订阅

### Context方式解决多层级组件中传值的方法

#### API

- 1、React.createContext 创建一对{ Provider, Consumer }
- 2、Provider
- 3、Consumer

回调 context 发布订阅 状态提升 redux
- 1、这是React高阶组件的一个demo
- 2、通过这些demo会让你对react高阶组件有一个好的理解
